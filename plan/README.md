# DocStudio 开发计划

本目录包含 DocStudio v1 MVP 的完整开发规划，按阶段（Stage）组织。

---

## 📋 Stage 概览

| Stage | 名称         | 状态      | 预计时间 | 说明                                 |
| ----- | ------------ | --------- | -------- | ------------------------------------ |
| 0     | 基础设施     | ✅ 已完成 | -        | 项目架构搭建、用户认证系统           |
| 1     | 核心基础功能 | 🚧 进行中 | 4-6周    | 工作空间、文档CRUD、编辑器、文档树   |
| 2     | 公开访问层   | 🌐 待开发 | 2-3周    | 项目首页、公开内容展示、SEO优化      |
| 3     | 团队协作功能 | 👥 待开发 | 3-4周    | 权限管理、私密分享                   |
| 4     | 高级功能     | ⚡ 进行中 | 4-6周    | 实时协作、文件上传(已完成)、版本历史 |

**总预计时间**: 约 3-4 个月

---

## 📁 文档列表

- [Stage 0: 基础设施](./stage-0-基础设施.md) ✅
- [Stage 1: 核心基础功能](./stage-1-核心基础功能.md)
- [Stage 2: 公开访问层](./stage-2-公开访问层.md)
- [Stage 3: 团队协作功能](./stage-3-团队协作功能.md)
- [Stage 4: 高级功能](./stage-4-高级功能.md)

---

## 🎯 产品定位

DocStudio 是一个**实时协作的知识管理平台**，具有两种使用模式：

### 🔒 私有模式（团队协作）

- 需要登录访问
- 团队成员协作编辑
- 严格的权限控制
- 可通过分享链接临时共享

### 🌐 公开模式（知识分享）

- 无需登录即可浏览
- 公开工作空间对所有人可见
- SEO 友好，可被搜索引擎索引
- 在项目首页展示

---

## 🚀 核心特性

1. **实时协作** - 多人同时编辑，冲突自动解决
2. **灵活权限** - 细粒度权限控制，公开/私有自由切换
3. **富文本编辑** - 基于 Tiptap，支持 Markdown、表格、代码块等
4. **文档树结构** - 层级组织，拖拽排序
5. **公开分享** - 工作空间级别的公开展示
6. **私密分享** - 带密码和有效期的临时分享
7. **版本历史** - 文档快照和版本恢复
8. **文件上传** - 图片和附件支持
9. **自托管** - 完全掌控数据，Docker 一键部署

---

## 📊 开发里程碑

### 🎯 Milestone 1: 基础可用（Stage 0-1）

**目标**: 单用户可以创建工作空间和文档，并进行编辑

- 用户注册登录 ✅
- 工作空间管理 ✅
- 文档 CRUD ✅
- 富文本编辑器 ✅
- 文档树导航 🏗️

### 🎯 Milestone 2: 公开展示（Stage 2）

**目标**: 产品具备对外展示能力，支持知识分享

- 项目首页
- 公开工作空间展示
- 公开内容浏览
- SEO 优化

### 🎯 Milestone 3: 团队协作（Stage 3）

**目标**: 支持团队内部协作和安全分享

- 权限管理系统
- 成员邀请和管理
- 私密分享链接

### 🎯 Milestone 4: 企业级（Stage 4）

**目标**: 功能完整的企业级文档协作平台

- 实时多人协作
- 文件和图片上传 ✅
- 版本历史和恢复

---

## 🛠️ 技术栈

### 前端

- **框架**: Next.js + React 19
- **编辑器**: Tiptap
- **协作**: Yjs + @hocuspocus/provider
- **样式**: Tailwind CSS
- **状态管理**: Zustand / React Query

### 后端

- **框架**: NestJS + Fastify
- **数据库**: PostgreSQL + Prisma
- **缓存**: Redis
- **协作服务**: Hocuspocus Server
- **对象存储**: MinIO
- **图像处理**: Sharp

### 部署

- **容器化**: Docker + Docker Compose
- **反向代理**: Nginx
- **监控**: Prometheus + Grafana

---

## 📖 使用指南

1. 按顺序阅读各个 Stage 的规划文档
2. 每个 Stage 文档包含：
   - 功能概述
   - 数据模型设计
   - API 接口设计
   - 前端功能设计
   - 技术实现要点
   - 验收标准
3. 开发时参考文档中的代码示例和最佳实践
4. 完成每个 Stage 后更新状态

---

## 📝 版本历史

- **2026-02-03**: 创建完整的 v1 MVP 规划文档
  - 定义 4 个开发阶段
  - 明确产品双模式定位
  - 细化所有功能的技术实现

---

## 🤝 贡献

如有建议或发现问题，请及时更新相关文档。

---

**让我们开始打造最好的文档协作平台！🚀**
