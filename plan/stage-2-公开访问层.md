# Stage 2: 公开访问层

**状态**: 🌐 待开发  
**预计时间**: 2-3 周  
**目标**: 打造产品门面，支持知识分享

---

## 概述

Stage 2 将 DocStudio 扩展为公开知识分享平台。通过项目首页展示所有公开工作空间，让任何人都可以无需登录即可浏览公开内容。

---

## 功能清单

### 1. 项目首页 (`/`)

#### 页面结构

**导航栏**

- Logo + 产品名
- 首页、探索、文档链接
- 登录/注册按钮

**Hero Section**

- 大标题："实时协作的知识管理平台"
- 副标题和简介
- CTA 按钮："免费开始"、"探索公开内容"
- 产品截图或插画

**核心特性展示**（3列卡片）

1. ⚡ 实时协作
2. 🔒 灵活权限
3. 🚀 自托管

**公开工作空间展示区**

- 见下节详细设计

**页脚**

- 关于、开源地址、联系方式、版权

---

### 2. 公开工作空间展示

#### API 接口

**GET /public/spaces**

- 权限：无需登录
- 查询参数：`page`, `limit`, `search`, `sort`, `order`
- 响应：公开 Space 列表 + 分页信息

#### 展示设计

**搜索和筛选栏**

- 搜索框
- 排序选择（最新更新/创建时间/文档数）
- 每页数量选择

**工作空间卡片网格**

- 响应式网格布局（移动1列、平板2列、桌面3-4列）
- 单个卡片内容：
  - Space 名称
  - 描述（2行省略）
  - 文档数量
  - 创建者（头像 + 昵称）
  - 最后更新时间
- Hover 效果和跳转

**分页/加载更多**

- 分页器或无限滚动
- 骨架屏 Loading

---

### 3. 公开 Space 详情页 (`/public/space/:id`)

#### API 接口

**GET /public/spaces/:id**

- 获取 Space 详情

**GET /public/spaces/:id/docs**

- 获取文档树

#### 页面布局

```
┌─────────────────────────┐
│ 导航栏                   │
└─────────────────────────┘
┌─────────────────────────┐
│ Space 信息卡片           │
└─────────────────────────┘
┌──────┬──────────────────┐
│文档树│ 欢迎/文档内容     │
└──────┴──────────────────┘
```

**功能**

- Space 信息展示
- 只读文档树导航
- 默认欢迎页
- 点击文档可查看内容

---

### 4. 公开文档阅读页 (`/public/doc/:id`)

#### API 接口

**GET /public/docs/:id**

- 获取公开文档内容

#### 页面布局（三列）

- 左：文档树
- 中：文档内容（只读编辑器）
- 右：目录（TOC）

**功能**

- 只读 Tiptap 渲染
- 自动生成 TOC
- 面包屑导航
- 工具栏（打印、分享、导出）
- 底部信息（创建者、时间）

---

### 5. SEO 优化

#### Meta 标签

- 首页、Space 页、文档页都有专属 Meta 标签
- Open Graph 和 Twitter Card 支持

#### Sitemap

- `GET /sitemap.xml` 生成站点地图
- 包含首页、所有公开 Space、所有公开文档

#### 其他措施

- robots.txt
- 结构化数据（JSON-LD）
- 语义化 HTML
- 性能优化（Core Web Vitals）
- HTTPS

---

### 6. 响应式设计

#### 断点

- 移动: < 640px
- 平板: 641px - 1024px
- 桌面: > 1025px

#### 适配策略

- 首页：移动单列、平板2列、桌面3-4列
- Space 详情：移动抽屉、平板侧边栏、桌面三列
- 导航：移动汉堡菜单、桌面水平导航

---

## 技术实现要点

### SSR（服务端渲染）

- 使用 Next.js App Router 或 `getServerSideProps`
- 首屏数据服务端获取，提升 SEO

### 性能优化

- Next.js Image 优化
- 组件懒加载
- 代码分割
- WebP 图片格式

---

## 验收标准

- ✅ 首页美观，符合现代设计
- ✅ 公开工作空间正确展示
- ✅ 可无需登录浏览公开内容
- ✅ 响应式布局正常
- ✅ SEO 优化到位（Meta、Sitemap）
- ✅ 性能良好（LCP < 2.5s）
- ✅ Google 可索引公开内容

---

## 下一步

完成后进入 **Stage 3: 团队协作功能**。
